<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>–ù–∞—à –£–≥–æ–ª–æ–∫ ‚ù§Ô∏è</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Montserrat:wght@300;500;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #ff758c 0%, #ff7eb3 100%);
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.3);
            --text-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Montserrat', sans-serif;
            background: #000;
            overflow: hidden;
            color: white;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∂–∏–≤–æ–π —Ñ–æ–Ω */
        .bg-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, #ff8da1 0%, #ff4d6d 50%, #800f2f 100%);
            z-index: -1;
            filter: blur(20px);
            animation: bgShift 15s infinite alternate;
        }

        @keyframes bgShift {
            0% { transform: scale(1) rotate(0deg); }
            100% { transform: scale(1.2) rotate(5deg); }
        }

        .app-wrapper {
            width: 90%;
            max-width: 420px;
            z-index: 10;
            perspective: 1000px;
        }

        /* –°—Ç–µ–∫–ª—è–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
        .main-card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: 40px;
            padding: 40px 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
            text-align: center;
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
        }

        .main-card:active {
            transform: scale(0.98);
        }

        .counter-header h2 {
            font-family: 'Pacifico', cursive;
            font-size: 1.8rem;
            margin: 0 0 30px 0;
            text-shadow: var(--text-shadow);
        }

        /* –°–µ—Ç–∫–∞ —Ç–∞–π–º–µ—Ä–∞ */
        .timer-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .timer-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px 10px;
            border-radius: 25px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
        }

        .timer-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        .timer-number {
            display: block;
            font-size: 2.2rem;
            font-weight: 800;
            letter-spacing: -1px;
            margin-bottom: 5px;
        }

        .timer-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.8;
            font-weight: 500;
        }

        .info-card {
            margin-top: 20px;
            font-style: italic;
            font-weight: 300;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* –ü–ª–∞–≤–∞—é—â–∏–µ —Å–µ—Ä–¥–µ—á–∫–∏ */
        .floating-element {
            position: absolute;
            pointer-events: none;
            z-index: 1;
            animation: floatUp 6s linear infinite;
            opacity: 0;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            20% { opacity: 0.6; }
            100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
        }

        .heart-pulse {
            display: inline-block;
            animation: heartBeat 1.2s infinite;
            color: #fff;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
        }

        @keyframes heartBeat {
            0% { transform: scale(1); }
            14% { transform: scale(1.3); }
            28% { transform: scale(1); }
            42% { transform: scale(1.15); }
            70% { transform: scale(1); }
        }
    </style>
</head>
<body>

<div class="bg-canvas"></div>

<div class="app-wrapper animate__animated animate__zoomIn">
    <div class="main-card" id="card">
        <div class="counter-header">
            <span class="heart-pulse">‚ù§Ô∏è</span>
            <h2>–õ—é–±–ª—é —Ç–µ–±—è —É–∂–µ</h2>
        </div>
        
        <div class="timer-grid">
            <div class="timer-item">
                <span class="timer-number" id="days">0</span>
                <span class="timer-label" id="days-label">–¥–Ω–µ–π</span>
            </div>
            <div class="timer-item">
                <span class="timer-number" id="hours">0</span>
                <span class="timer-label" id="hours-label">—á–∞—Å–æ–≤</span>
            </div>
            <div class="timer-item">
                <span class="timer-number" id="mins">0</span>
                <span class="timer-label" id="mins-label">–º–∏–Ω—É—Ç</span>
            </div>
            <div class="timer-item">
                <span class="timer-number" id="secs">0</span>
                <span class="timer-label" id="secs-label">—Å–µ–∫—É–Ω–¥</span>
            </div>
        </div>

        <div class="info-card">
            <p>¬´–¢—ã ‚Äî –º–æ—ë —Å–∞–º–æ–µ –∫—Ä–∞—Å–∏–≤–æ–µ ‚Äû–¥–∞‚Äú –≤ —ç—Ç–æ–π –∂–∏–∑–Ω–∏¬ª üå∏</p>
        </div>
    </div>
</div>

<script>
    const START_DATE = new Date(2025, 11, 22, 19, 30, 0); 

    function updateTimer() {
        const now = new Date();
        const diff = now - START_DATE;

        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const m = Math.floor((diff / (1000 * 60)) % 60);
        const s = Math.floor((diff / 1000) % 60);

        // –ü–ª–∞–≤–Ω–∞—è –∑–∞–º–µ–Ω–∞ —Ü–∏—Ñ—Ä
        updateElement("days", d);
        updateElement("hours", h);
        updateElement("mins", m);
        updateElement("secs", s);

        document.getElementById("days-label").innerText = declension(d, ['–¥–µ–Ω—å', '–¥–Ω—è', '–¥–Ω–µ–π']);
        document.getElementById("hours-label").innerText = declension(h, ['—á–∞—Å', '—á–∞—Å–∞', '—á–∞—Å–æ–≤']);
        document.getElementById("mins-label").innerText = declension(m, ['–º–∏–Ω—É—Ç–∞', '–º–∏–Ω—É—Ç—ã', '–º–∏–Ω—É—Ç']);
        document.getElementById("secs-label").innerText = declension(s, ['—Å–µ–∫—É–Ω–¥–∞', '—Å–µ–∫—É–Ω–¥—ã', '—Å–µ–∫—É–Ω–¥']);
    }

    function updateElement(id, value) {
        const el = document.getElementById(id);
        if(el.innerText !== value.toString()) {
            el.innerText = value;
            el.classList.add('animate__animated', 'animate__pulse');
            setTimeout(() => el.classList.remove('animate__pulse'), 500);
        }
    }

    function declension(n, titles) {
        return titles[(n % 10 === 1 && n % 100 !== 11) ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2];
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ—Ç–∞—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    function spawnParticle() {
        const particle = document.createElement('div');
        particle.className = 'floating-element';
        particle.innerText = ['‚ù§Ô∏è', '‚ú®', 'üå∏', 'üíï'][Math.floor(Math.random() * 4)];
        particle.style.left = Math.random() * 100 + 'vw';
        particle.style.fontSize = (Math.random() * 20 + 10) + 'px';
        particle.style.bottom = "-5vh";
        document.body.appendChild(particle);
        
        setTimeout(() => particle.remove(), 6000);
    }

    setInterval(updateTimer, 1000);
    setInterval(spawnParticle, 600);
    updateTimer();

    // –≠—Ñ—Ñ–µ–∫—Ç –Ω–∞–∫–ª–æ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞ –ø–∞–ª—å—Ü–µ–º (Gyroscope-like)
    const card = document.getElementById('card');
    document.addEventListener('mousemove', (e) => {
        const x = (window.innerWidth / 2 - e.pageX) / 25;
        const y = (window.innerHeight / 2 - e.pageY) / 25;
        card.style.transform = `rotateY(${x}deg) rotateX(${y}deg)`;
    });
    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
        .then(() => console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
        .catch(err => console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ SW:', err));
}

async function enableNotifications() {
    // –ü—Ä–æ—Å–∏–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
    const permission = await Notification.requestPermission();
    
    if (permission === 'granted') {
        document.getElementById('notify-btn').innerText = '‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã';
        
        // –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
        setTimeout(() => {
            showLocalNotification("–ü—Ä–∏–≤–µ—Ç, –ª—é–±–∏–º–∞—è! ‚ù§Ô∏è", "–¢–µ–ø–µ—Ä—å —Ç—ã –±—É–¥–µ—à—å –ø–æ–ª—É—á–∞—Ç—å –º–æ–∏ –Ω–µ–∂–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è.");
        }, 3000);

        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º "–±—É–¥–∏–ª—å–Ω–∏–∫" —Å–æ–æ–±—â–µ–Ω–∏–π
        startLoveInterval();
    } else {
        alert('–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω—É–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –±—Ä–∞—É–∑–µ—Ä–∞.');
    }
}

function showLocalNotification(title, body) {
    if ('serviceWorker' in navigator && Notification.permission === 'granted') {
        navigator.serviceWorker.ready.then(registration => {
            registration.showNotification(title, { body, icon: 'https://cdn-icons-png.flaticon.com/512/833/833472.png' });
        });
    }
}

// –§—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–ª–∞—Ç—å —Ä–∞–Ω–¥–æ–º–Ω—ã–µ —Ñ—Ä–∞–∑—ã
function startLoveInterval() {
    const phrases = [
        "–ü—Ä–æ—Å—Ç–æ —Ö–æ—Ç–µ–ª —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç—ã —á—É–¥–æ... ‚ú®",
        "–¢—ã ‚Äî —Å–∞–º–æ–µ –ª—É—á—à–µ–µ, —á—Ç–æ —Å–æ –º–Ω–æ–π —Å–ª—É—á–∏–ª–æ—Å—å üå∏",
        "–°–∫—É—á–∞—é –ø–æ —Ç–µ–±–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É... üíï",
        "–ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ —Å—á–µ—Ç—á–∏–∫, –Ω–∞—à–µ –≤—Ä–µ–º—è –±–µ—Å—Ü–µ–Ω–Ω–æ ‚ù§Ô∏è",
        "–¢–≤–æ—è —É–ª—ã–±–∫–∞ ‚Äî –º–æ–π –ª—é–±–∏–º—ã–π –≤–∏–¥ –∏—Å–∫—É—Å—Å—Ç–≤–∞ üé®"
    ];

    // –ë—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É, –Ω–µ –ø–æ—Ä–∞ –ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å (–¥–ª—è —Ç–µ—Å—Ç–∞)
    // –í —Ä–µ–∞–ª—å–Ω–æ–º PWA –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Push API —Å —Å–µ—Ä–≤–µ—Ä–∞, 
    // –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π —Ç–∞–π–º–µ—Ä, –ø–æ–∫–∞ –≤–∫–ª–∞–¥–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞:
    setInterval(() => {
        const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
        showLocalNotification("–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ª—é–±–≤–∏", randomPhrase);
    }, 3600000); // –†–∞–∑ –≤ —á–∞—Å
}
</script>

</body>
</html>
